import { useState, useEffect } from 'react'
import Head from 'next/head'
import Image from 'next/image'
import { css } from '@emotion/react'
import { useRouter } from 'next/router'
import axios from 'axios'

const result = () => {  
  const [posts, setPosts] = useState(null)
  
  useEffect(() => {
    axios.get('https://www.jma.go.jp/bosai/forecast/data/forecast/270000.json')
    .then((response) => {setPosts(response.data)})
    .catch((err) => {})
  }, [])  

  if(!posts){    
    return null
  }
  

  // console.log(posts[0].timeSeries[0].areas[0].area.name);
  // console.log(posts[1].tempAverage.areas[0].max);
  // console.log(posts[1].tempAverage.areas[0].min);
  // console.log(posts[0].timeSeries[0].areas[0].weathers[0]);
  // console.log(posts[0].timeSeries[2].areas[0].temps[0]);
  // console.log(posts[0].timeSeries[2].areas[0].temps[1]);
  
  const router = useRouter()

  const Main = css`
    background-color: #A1C6EA;
    height: 100vh;
    position: relative;
  `
  const Section = css`
    background-color: rgba(245, 245, 245, 0.4);
    width: 96%;
    height: 97%;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    margin: auto;
    border-radius: 10px;
    box-shadow: 10px 5px 60px rgba(0, 0, 0, 0.25);
    padding: 20px;
  `
  const BtnWrap = css`
  margin: 0 auto;
  bottom: 20px;
  position: absolute;
  button {
    color: #fff;
    display: block;
    margin: 0 0 18px;
    width: 300px;
    padding: 16px 0;
    background: linear-gradient(45deg, rgba(42,130,215,1) 0%, rgba(38,118,195,1) 100%);
    border: 1px solid #fff;
    border-radius: 20px;
    cursor: pointer;
  }
`
  return (
    <>
      <Head>
        <title>Weather Wear | 今日のファッションは天気次第</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main css={Main}>
        <section css={Section}>
          <div>
            {/* <div>
              <Image src="/images/logo.png" alt="Weather Wear" width={197} height={56} />
            </div> */}
            <p>朝・夜は　ジャケットなど羽織るものが必要で昼は薄手の長袖シャツなどで十分でしょう。<br />今日も一日がんばりましょう！</p>
            <div>
              <p>{posts[0].timeSeries[0].areas[0].area.name}</p>
              <p>今日の天気は<span>{posts[0].timeSeries[0].areas[0].weathers[0]}</span></p>
              <ul>
                <li>最高気温<span>{posts[0].timeSeries[2].areas[0].temps[1]}</span></li>
                <li>最低気温<span>{posts[0].timeSeries[2].areas[0].temps[0]}</span></li>
              </ul>
            </div>
          </div>
          <div css={BtnWrap}>
            <button onClick={() => router.push("/")}>TOP</button>
          </div>
        </section>
      </main>
    </>
  )
}

export default result